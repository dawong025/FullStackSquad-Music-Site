{"ast":null,"code":"var _jsxFileName = \"/Users/hadiramlaoui/Desktop/csc600/final-project-fullstacksquad/client/src/DrumnIstrument.tsx\",\n    _s = $RefreshSig$();\n\n// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone'; // project imports\n\nimport { DispatchAction } from './Reducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class MembraneInstrument {\n  constructor(name, component) {\n    this.name = void 0;\n    this.component = void 0;\n    this.name = name;\n    this.component = component;\n  }\n\n}\n\nfunction TopNav(_ref) {\n  let {\n    name\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'w-100 h3 bb b--light-gray flex justify-between items-center ph4',\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n\n_c = TopNav;\nexport const InstrumentContainer = _ref2 => {\n  _s();\n\n  let {\n    instrument,\n    state,\n    dispatch\n  } = _ref2;\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(new Tone.MembraneSynth({\n    oscillator: {\n      type: 'sine'\n    }\n  }).toDestination());\n  const notes = state.get('notes');\n  useEffect(() => {\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note, idx) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1\n      }));\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n      Tone.Transport.start();\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(TopNav, {\n      name: instrument.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'bg-white absolute right-0 left-0',\n      style: {\n        top: '4rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(InstrumentComponent, {\n        name: instrument.name,\n        state: state,\n        dispatch: dispatch,\n        synth: synth,\n        setSynth: setSynth\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(InstrumentContainer, \"ICXCbWF3fvHw2FfwiJZ8ygWEsZ0=\");\n\n_c2 = InstrumentContainer;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TopNav\");\n$RefreshReg$(_c2, \"InstrumentContainer\");","map":{"version":3,"names":["React","useState","useEffect","Tone","DispatchAction","MembraneInstrument","constructor","name","component","TopNav","InstrumentContainer","instrument","state","dispatch","InstrumentComponent","synth","setSynth","MembraneSynth","oscillator","type","toDestination","notes","get","eachNote","split","noteObjs","map","note","idx","time","velocity","Part","value","triggerAttackRelease","length","start","Transport","cancel","top"],"sources":["/Users/hadiramlaoui/Desktop/csc600/final-project-fullstacksquad/client/src/DrumnIstrument.tsx"],"sourcesContent":["// 3rd party library imports\nimport React, { useState, useEffect } from 'react';\nimport * as Tone from 'tone';\n\n// project imports\nimport { DispatchAction } from './Reducer';\nimport { AppState } from './State';\n\n/** ------------------------------------------------------------------------ **\n * Contains implementation of an Instruments.\n ** ------------------------------------------------------------------------ */\n\nexport interface InstrumentProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  name: string;\n  synth: Tone.MembraneSynth;\n  setSynth: (f: (oldSynth: Tone.Synth) => Tone.MembraneSynth) => void;\n}\n\nexport class MembraneInstrument {\n  public readonly name: string;\n  public readonly component: React.FC<InstrumentProps>;\n\n  constructor(name: string, component: React.FC<InstrumentProps>) {\n    this.name = name;\n    this.component = component;\n  }\n}\n\nfunction TopNav({ name }: { name: string }) {\n  return (\n    <div\n      className={\n        'w-100 h3 bb b--light-gray flex justify-between items-center ph4'\n      }\n    >\n      <div>{name}</div>\n    </div>\n  );\n}\n\ninterface InstrumentContainerProps {\n  state: AppState;\n  dispatch: React.Dispatch<DispatchAction>;\n  instrument: MembraneInstrument;\n}\n\nexport const InstrumentContainer: React.FC<InstrumentContainerProps> = ({\n  instrument,\n  state,\n  dispatch,\n}: InstrumentContainerProps) => {\n  const InstrumentComponent = instrument.component;\n  const [synth, setSynth] = useState(\n    new Tone.MembraneSynth({\n      oscillator: { type: 'sine' } as Tone.OmniOscillatorOptions,\n    }).toDestination(),\n  );\n\n  const notes = state.get('notes');\n\n  useEffect(() => {\n    if (notes && synth) {\n      let eachNote = notes.split(' ');\n      let noteObjs = eachNote.map((note: string, idx: number) => ({\n        idx,\n        time: `+${idx / 4}`,\n        note,\n        velocity: 1,\n      }));\n\n      new Tone.Part((time, value) => {\n        // the value is an object which contains both the note and the velocity\n        synth.triggerAttackRelease(value.note, '4n', time, value.velocity);\n        if (value.idx === eachNote.length - 1) {\n          dispatch(new DispatchAction('STOP_SONG'));\n        }\n      }, noteObjs).start(0);\n\n      Tone.Transport.start();\n\n      return () => {\n        Tone.Transport.cancel();\n      };\n    }\n\n    return () => {};\n  }, [notes, synth, dispatch]);\n\n  return (\n    <div>\n      <TopNav name={instrument.name} />\n      <div\n        className={'bg-white absolute right-0 left-0'}\n        style={{ top: '4rem' }}\n      >\n        <InstrumentComponent\n          name={instrument.name}\n          state={state}\n          dispatch={dispatch}\n          synth={synth}\n          setSynth={setSynth}\n        />\n      </div>\n    </div>\n  );\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}