{"ast":null,"code":"import { io as newSocket } from 'socket.io-client';\nconst SOCKET_URL = 'ws://localhost:3001';\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000\n};\nlet idCounter = 1;\nexport async function send(socket, name, msg) {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const {\n        error,\n        ...success\n      } = resp;\n\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, {\n      _id,\n      ...msg\n    });\n  });\n}\nexport function initializeSocket(onConnect, onDisconnect) {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n  return socket;\n}","map":{"version":3,"names":["io","newSocket","SOCKET_URL","SOCKET_OPTS","transports","path","autoConnect","reconnection","timeout","idCounter","send","socket","name","msg","_id","Promise","resolve","reject","once","resp","error","success","emit","initializeSocket","onConnect","onDisconnect","on"],"sources":["/Users/denyseluzon/Documents/GitHub/final-project-fullstacksquad/client/src/Socket.tsx"],"sourcesContent":["import { io as newSocket, Socket as SocketIO } from 'socket.io-client';\n\nconst SOCKET_URL = 'ws://localhost:3001';\n\nconst SOCKET_OPTS = {\n  transports: ['websocket'],\n  path: '/ws',\n  autoConnect: true,\n  reconnection: true,\n  timeout: 10000,\n};\n\nlet idCounter = 1;\n\nexport async function send(\n  socket: Socket,\n  name: string,\n  msg: any,\n): Promise<any> {\n  const _id = idCounter++;\n\n  return new Promise((resolve, reject) => {\n    socket.once(`${name}.${_id}`, resp => {\n      const { error, ...success } = resp;\n      if (success) {\n        resolve(success);\n      } else {\n        reject(error);\n      }\n    });\n    socket.emit(name, { _id, ...msg });\n  });\n}\n\n\nexport type Socket = SocketIO;\n\nexport function initializeSocket(\n  onConnect: (socket: Socket) => void,\n  onDisconnect: () => void,\n): Socket {\n  const socket = newSocket(SOCKET_URL, SOCKET_OPTS);\n\n  socket.on('connect', () => onConnect(socket));\n  socket.on('disconnect', onDisconnect);\n\n  return socket;\n}\n"],"mappings":"AAAA,SAASA,EAAE,IAAIC,SAAf,QAAoD,kBAApD;AAEA,MAAMC,UAAU,GAAG,qBAAnB;AAEA,MAAMC,WAAW,GAAG;EAClBC,UAAU,EAAE,CAAC,WAAD,CADM;EAElBC,IAAI,EAAE,KAFY;EAGlBC,WAAW,EAAE,IAHK;EAIlBC,YAAY,EAAE,IAJI;EAKlBC,OAAO,EAAE;AALS,CAApB;AAQA,IAAIC,SAAS,GAAG,CAAhB;AAEA,OAAO,eAAeC,IAAf,CACLC,MADK,EAELC,IAFK,EAGLC,GAHK,EAIS;EACd,MAAMC,GAAG,GAAGL,SAAS,EAArB;;EAEA,OAAO,IAAIM,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;IACtCN,MAAM,CAACO,IAAP,CAAa,GAAEN,IAAK,IAAGE,GAAI,EAA3B,EAA8BK,IAAI,IAAI;MACpC,MAAM;QAAEC,KAAF;QAAS,GAAGC;MAAZ,IAAwBF,IAA9B;;MACA,IAAIE,OAAJ,EAAa;QACXL,OAAO,CAACK,OAAD,CAAP;MACD,CAFD,MAEO;QACLJ,MAAM,CAACG,KAAD,CAAN;MACD;IACF,CAPD;IAQAT,MAAM,CAACW,IAAP,CAAYV,IAAZ,EAAkB;MAAEE,GAAF;MAAO,GAAGD;IAAV,CAAlB;EACD,CAVM,CAAP;AAWD;AAKD,OAAO,SAASU,gBAAT,CACLC,SADK,EAELC,YAFK,EAGG;EACR,MAAMd,MAAM,GAAGV,SAAS,CAACC,UAAD,EAAaC,WAAb,CAAxB;EAEAQ,MAAM,CAACe,EAAP,CAAU,SAAV,EAAqB,MAAMF,SAAS,CAACb,MAAD,CAApC;EACAA,MAAM,CAACe,EAAP,CAAU,YAAV,EAAwBD,YAAxB;EAEA,OAAOd,MAAP;AACD"},"metadata":{},"sourceType":"module"}